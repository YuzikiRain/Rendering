## 描边

- 基于颜色检测的后处理：
    - 先渲染颜色缓冲到纹理，然后通过经验公式计算明度（luminance），卷积公式得出和周围像素的差异是否超过某个阈值来决定是否是边缘
    - 先用指定颜色（一般就纯色）渲染要描边的物体，然后
- 法线外扩-背面剔除（back facing）：将顶点沿着法线方向移动一定距离（即描边宽度），再渲染成描边颜色，背面剔除设置为仅剔除正面来剔除前半部分的描边壳子，再利用深度测试剔除与物体重叠的部分
    描边断开的处理：法线平均化，顶点法线使用相邻三角形面片的法线均值
- 法线外扩-模板测试：第一个pass写入模板缓冲（模板测试为always replace），第二个pass需要法线外扩，再进行模板测试，和第一个pass的模板值比较，仅当不相等时（即扩张出来的部分的片元）才渲染描边颜色
- 法线方向和视角方向的夹角判断是否是边缘：缺点是边缘宽度不能控制
- 法线方向、深度差异：一般通过深度法线纹理，同时判断深度、法线方向的差异是否超过阈值，类似颜色检测用卷积对每个片元判断。
- SDF：还不太了解

## 降低色阶

一般通过降低色阶来表现手绘效果。

step、smoothstep、ramp纹理

## 冷暖色调分离

为明面和暗面分配不同色调的颜色。比如一个暖色调的明面，配合一个冷色调的暗面。一般就是不同色调直接使用不同贴图。

在《GUILTY GEAR Xrd》游戏中，绘制了一张称为SSS Texture的贴图，来对暗面的色调进行调整。

## **对明暗区域的手绘控制**

### **Threshold贴图**

《GUILTY GEAR Xrd》中使用称为ilmTexture的贴图对角色明暗区域实现手绘风格的控制

### **法线方向控制**

- 改模型顶点法线：法线传递
- SDF纹理：沿着横向灰度增加，一般用于脸部光照，但会产生阴阳脸

## 其他

### 边缘光

- 用法线方向和视角方向的点积计算贡献度
- 对范围、软硬程度进行控制：使用smoothstep
- 美术优化：使用mask贴图来控制哪些区域不会产生边缘光

### PBR

- 分开渲染：用mask区分NPR和PBR的区域
- 混合渲染：计算完毕后进行混合

好的例子：嗜血代码